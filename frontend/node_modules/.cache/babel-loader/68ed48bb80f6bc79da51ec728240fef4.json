{"ast":null,"code":"import _slicedToArray from\"C:/Users/Admin/Desktop/jv6/demo/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import{Link,Redirect}from\"react-router-dom\";import{myHeaderConf}from'../../../tokenutils/tokenutils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Table(_ref){var uri=_ref.uri;var api=\"http://localhost:8080\";var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isOrderdetailByOrder=_useState6[0],setIsOrderdetailByOrder=_useState6[1];var getCookie=function getCookie(cname){var name=cname+\"=\";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1);}if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}return\"\";};useEffect(function(){axios.get(api+uri,{withCredentials:true,credentials:true}).then(function(res){var data=res.data;setData(data.content);setPage({number:data.number,first:data.first,last:data.last,totalElements:data.totalElements,totalPages:data.totalPages,size:data.size,numberOfElements:data.numberOfElements});}).catch(function(error){console.log(error);});},[]);var changePage=function changePage(page){axios.get(api+uri+\"?page=\"+page,{headers:{\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(function(res){var data=res.data;setData(data.content);setPage({number:data.number,first:data.first,last:data.last,totalElements:data.totalElements,totalPages:data.totalPages,size:data.size,numberOfElements:data.numberOfElements});}).catch(function(error){console.log(error);});};var convertIfObjectOrArray=function convertIfObjectOrArray(val){if(Array.isArray(val)){var rs=\"\";val.map(function(val){rs+=val.role.name+\", \";});return rs;}else if(typeof val===\"object\"){if(Object.keys(val).includes(\"name\")){return val.name;}else if(Object.keys(val).includes(\"username\")){return val.username;}return val.id;}return val;};var getAllOrderDetailByOrder=function getAllOrderDetailByOrder(id){axios.get(api+\"/admin/order/orderdetail/\"+id,{headers:{\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(function(res){setData(res.data);setIsOrderdetailByOrder(true);}).catch(function(error){console.log(error);});};var orderDetailByOrder=function orderDetailByOrder(id){if(uri.includes('order')&&!uri.includes('orderdetail')&&!isOrderdetailByOrder){return/*#__PURE__*/_jsx(\"a\",{className:\"dropdown-item\",onClick:function onClick(){getAllOrderDetailByOrder(id);},children:\"Order Detail\"});}};var deleteObj=function deleteObj(elm){var key=null;if(Object.keys(elm).includes(\"id\")){key=elm.id;}else if(Object.keys(elm).includes(\"username\")){key=elm.username;}var url=\"\";if(isOrderdetailByOrder){url=api+\"/admin/orderdetail/delete/\"+key;}else{url=api+uri.replace(\"table\",\"delete/\"+key);}axios.delete(url,{headers:{\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(function(){isOrderdetailByOrder?getAllOrderDetailByOrder(elm.order.id):changePage(page.number);}).catch(function(error){console.log(error);});};var backToOrder=function backToOrder(){changePage(page.number);setIsOrderdetailByOrder(false);};var render=function render(){var keys=[];if(Array.isArray(data)&&data.length>0){keys=Object.keys(data[0]);return/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[keys.map(function(key,idx){return/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:key},idx);}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"delete\"},\"xx\")]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map(function(elm,idx){return/*#__PURE__*/_jsxs(\"tr\",{children:[Object.values(elm).map(function(val,idx){return/*#__PURE__*/_jsx(\"td\",{children:String(convertIfObjectOrArray(val))},idx);}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger dropdown-toggle\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\",children:\"Action\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-menu\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"dropdown-item\",onClick:function onClick(){deleteObj(elm);},children:\"delete\"}),orderDetailByOrder(elm.id),!uri.includes('order')&&/*#__PURE__*/_jsx(Link,{className:\"dropdown-item\",to:uri.replace(\"table\",\"form\").replace(\"/api\",\"\")+\"/\"+elm.id,children:\"edit\"})]})]})},\"xx\")]},idx);})})]});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column justify-content-center mt-3 mb-3\",children:[render(),!isOrderdetailByOrder&&/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"Page navigation \",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"pagination justify-content-center mt-3 mb-3\",children:[!page.first&&/*#__PURE__*/_jsx(\"li\",{className:\"page-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"page-link\",onClick:function onClick(){changePage(page.number-1);},children:\"Previous\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"page-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"page-link\",children:page.number+1})}),!page.last&&/*#__PURE__*/_jsx(\"li\",{className:\"page-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"page-link\",onClick:function onClick(){changePage(page.number+1);},children:\"Next\"})})]})}),isOrderdetailByOrder&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary btn-sm\",onClick:backToOrder,children:\"Back\"})]});}","map":{"version":3,"sources":["C:/Users/Admin/Desktop/jv6/demo/frontend/src/components/adminComponents/table/Table.js"],"names":["React","useState","useEffect","axios","Link","Redirect","myHeaderConf","Table","uri","api","data","setData","page","setPage","isOrderdetailByOrder","setIsOrderdetailByOrder","getCookie","cname","name","ca","document","cookie","split","i","length","c","charAt","substring","indexOf","get","withCredentials","credentials","then","res","content","number","first","last","totalElements","totalPages","size","numberOfElements","catch","error","console","log","changePage","headers","localStorage","getItem","convertIfObjectOrArray","val","Array","isArray","rs","map","role","Object","keys","includes","username","id","getAllOrderDetailByOrder","orderDetailByOrder","deleteObj","elm","key","url","replace","delete","order","backToOrder","render","idx","values","String"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport axios from 'axios';\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport {myHeaderConf} from '../../../tokenutils/tokenutils';\r\nexport default function Table({uri}) {\r\n\r\n\r\n    const api = \"http://localhost:8080\";\r\n    const [data,setData] = useState([]);\r\n    const [page,setPage] = useState({});\r\n    const [isOrderdetailByOrder,setIsOrderdetailByOrder] = useState(false);\r\n    \r\n    const getCookie = (cname) => {\r\n        let name = cname + \"=\";\r\n        let ca = document.cookie.split(';');\r\n        for(let i = 0; i < ca.length; i++) {\r\n            let c = ca[i];\r\n            while (c.charAt(0) == ' ') {\r\n            c = c.substring(1);\r\n            }\r\n            if (c.indexOf(name) == 0) {\r\n            return c.substring(name.length, c.length);\r\n            }\r\n        }\r\n        return \"\";\r\n      }\r\n\r\n    useEffect(()=>{\r\n        axios.get(api+uri,{\r\n            withCredentials: true,\r\n            credentials : true\r\n        })\r\n        .then((res)=>{\r\n            let data = res.data;\r\n            setData(data.content);\r\n            setPage({number:data.number,\r\n                first: data.first,last: data.last,\r\n                totalElements: data.totalElements,totalPages: data.totalPages,size: data.size,\r\n                numberOfElements: data.numberOfElements});\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n        })\r\n    },[])\r\n\r\n    const changePage = (page) => {\r\n        axios.get(api+uri+\"?page=\"+page,{\r\n            headers : {\r\n                \"Authorization\" : \"Bearer \"+localStorage.getItem(\"jwt\")\r\n            }\r\n        })\r\n        .then((res)=>{\r\n            let data = res.data;\r\n            setData(data.content);\r\n            setPage({number:data.number,\r\n                first: data.first,last: data.last,\r\n                totalElements: data.totalElements,totalPages: data.totalPages,size: data.size,\r\n                numberOfElements: data.numberOfElements});\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n        })\r\n    }\r\n\r\n    const convertIfObjectOrArray = (val)=>{\r\n        if(Array.isArray(val)){\r\n            let rs = \"\";\r\n            val.map((val)=>{\r\n                rs+=val.role.name+\", \";\r\n            })\r\n            return rs\r\n        }else if(typeof val === \"object\"){\r\n            if(Object.keys(val).includes(\"name\")){\r\n                return val.name;\r\n            }else if(Object.keys(val).includes(\"username\")){\r\n                return val.username;\r\n            }\r\n            return val.id;\r\n        }\r\n        return val;\r\n    }\r\n\r\n    const getAllOrderDetailByOrder = (id)=>{\r\n        axios.get(api+\"/admin/order/orderdetail/\"+id,{\r\n            headers : {\r\n                \"Authorization\" : \"Bearer \"+localStorage.getItem(\"jwt\")\r\n            }\r\n        })\r\n        .then(res => {\r\n            setData(res.data);\r\n            setIsOrderdetailByOrder(true);\r\n        })\r\n        .catch((error)=>{\r\n            console.log(error);\r\n        })\r\n    }\r\n\r\n    const orderDetailByOrder = (id) => {\r\n        if(uri.includes('order') && !uri.includes('orderdetail') && !isOrderdetailByOrder){\r\n            return <a className=\"dropdown-item\" onClick = {()=>{getAllOrderDetailByOrder(id)}}>Order Detail</a>\r\n        }\r\n    }\r\n\r\n    const deleteObj = (elm) => {\r\n        let key = null;\r\n        if(Object.keys(elm).includes(\"id\")){\r\n            key = elm.id;\r\n        }else if(Object.keys(elm).includes(\"username\")){\r\n            key = elm.username;\r\n        }\r\n        let url = \"\";\r\n        if(isOrderdetailByOrder){\r\n            url = api+\"/admin/orderdetail/delete/\"+key;\r\n        }else{\r\n            url = api+uri.replace(\"table\",\"delete/\"+key)\r\n        }\r\n        axios.delete(url,{\r\n            headers : {\r\n                \"Authorization\" : \"Bearer \"+localStorage.getItem(\"jwt\")\r\n            }\r\n        })\r\n        .then(()=>{isOrderdetailByOrder?getAllOrderDetailByOrder(elm.order.id):changePage(page.number)})\r\n        .catch((error)=>{\r\n            console.log(error)\r\n        });\r\n        \r\n    }\r\n\r\n    const backToOrder = ()=>{\r\n        changePage(page.number);\r\n        setIsOrderdetailByOrder(false);\r\n    }\r\n\r\n    const render = () => {\r\n        var keys = [];\r\n        if(Array.isArray(data) && data.length>0){\r\n            keys = Object.keys(data[0]);\r\n            return (\r\n            <table className=\"table\">\r\n            <thead>\r\n                <tr>\r\n                    {keys.map((key,idx) => {\r\n                        return (\r\n                        <th scope=\"col\" key = {idx}>{key}</th>\r\n                        )\r\n                    })}\r\n                    <th scope=\"col\" key = \"xx\">delete</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                    {data.map((elm,idx)=>{\r\n                        return (\r\n                        <tr key = {idx}>\r\n                            {Object.values(elm).map((val,idx)=>{\r\n                                return (<td key = {idx} >{String(convertIfObjectOrArray(val))}</td>)\r\n                            })}\r\n                            <td key = \"xx\" >\r\n                            <div className=\"btn-group\">\r\n                                <button type=\"button\" className=\"btn btn-danger dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                Action\r\n                                </button>\r\n                                <div className=\"dropdown-menu\">\r\n                                <a className=\"dropdown-item\" onClick = {()=>{deleteObj(elm)}}>delete</a>\r\n                                {orderDetailByOrder(elm.id)}\r\n                                {!uri.includes('order') && <Link className=\"dropdown-item\" to = {uri.replace(\"table\",\"form\").replace(\"/api\",\"\")+\"/\"+elm.id}>edit</Link>}\r\n                                \r\n                                </div>\r\n                            </div>\r\n\r\n                            </td>\r\n                        </tr>\r\n                        )\r\n                    })}\r\n          </tbody>\r\n          </table>\r\n            )\r\n        }\r\n    }\r\n    return (\r\n        <div className = \"d-flex flex-column justify-content-center mt-3 mb-3\">\r\n            {render()}\r\n            {!isOrderdetailByOrder &&\r\n            <nav aria-label=\"Page navigation \">\r\n            <ul className=\"pagination justify-content-center mt-3 mb-3\">\r\n                {!page.first && <li className=\"page-item\"><a className=\"page-link\" onClick = {() => {changePage(page.number-1)}}>Previous</a></li>}\r\n                <li className=\"page-item\"><a className=\"page-link\">{page.number+1}</a></li>\r\n                {!page.last && <li className=\"page-item\"><a className=\"page-link\" onClick = {() => {changePage(page.number+1)}}>Next</a></li>}\r\n            </ul>\r\n            </nav>\r\n            }\r\n            {\r\n                isOrderdetailByOrder && <button type=\"button\" className=\"btn btn-primary btn-sm\" onClick = {backToOrder}>Back</button>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}